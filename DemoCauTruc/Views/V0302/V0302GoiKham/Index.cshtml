@model List<M0302GoiKhamSTO>
@using DemoCauTruc.Models.M0302;

<link rel="stylesheet" href="./dist/css/CSS0302/CSS0302Styles.css">

<div class="container_goiKham">
	<div class="container_goiKham left">
		<div class="row" style="padding:0;">
			<div style="width: 100%;padding:0;">
				<label class="form-label">Từ ngày</label>
				<div class="input-group">
					<input type="text"
						   class="form-control date-input"
						   id="ngayTuNgay"
						   name="TuNgay"
						   value="@DateTime.Now.ToString("dd-MM-yyyy")"
						   placeholder="dd-mm-yyyy"
						   autocomplete="off" />
					<span class="input-group-text cursor-pointer datepicker-trigger">
						<i class="bi bi-calendar"></i>
					</span>
				</div>
				<span class="text-danger"></span>
			</div>
			<div style="width: 100%; margin-bottom:8px;padding:0;">
				<label class="form-label">Đến ngày</label>
				<div class="input-group">
					<input type="text"
						   class="form-control date-input"
						   id="ngayDenNgay"
						   name="DenNgay"
						   value="@DateTime.Now.ToString("dd-MM-yyyy")"
						   placeholder="dd-mm-yyyy"
						   autocomplete="off" />
					<span class="input-group-text cursor-pointer datepicker-trigger">
						<i class="bi bi-calendar"></i>
					</span>
				</div>
				<span class="text-danger"></span>
			</div>
			<label style="padding:0;">
				<button id="btnFilter" class="btn btn-outline-primary mb-3">
					<i class="bi bi-funnel"></i> Lọc danh sách
				</button>
			</label>
		</div>
		<div class="row export-buttons">
			<button id="btnExportPDFGoiKham" class="btn btn-outline-danger mb-3">
				<i class="bi bi-file-earmark-pdf"></i> Xuất PDF
			</button>
			<button id="btnExportExcelGoiKham" class="btn btn-outline-success mb-3">
				<i class="bi bi-file-earmark-excel"></i> Xuất Excel
			</button>
		</div>

	</div>
	<div class="container_goiKham right">
		<!-- Thêm spinner -->
		<div id="loadingSpinner" class="text-center" style="display: none; margin: 20px 0;">
			<div class="spinner-border text-primary" role="status">
				<span class="visually-hidden">Loading...</span>
			</div>
			<p>Đang tải dữ liệu...</p>
		</div>


		<div class="table-wrapper">
			<table style="width:98%; margin: auto; table-layout: fixed;" cellpadding="8">
				<thead>
					<tr>
						<th style="width: 3%">STT</th>
						<th style="width: 7%">Mã y tế</th>
						<th style="width: 12%">Họ và tên</th>
						<th style="width: 14%">Gói khám</th>
						<th style="width: 8%">Ngày đăng ký</th>
						<th style="width: 10%">Trạng thái thực hiện</th>
						<th style="width: 10%">Chỉ định còn lại</th>
						<th style="width: 10%">Ghi chú</th>
					</tr>
				</thead>
				<tbody>
				</tbody>

			</table>

		</div>
		<div class="phan_trang">
			<div>
				<label class="form-label" style="font-size:1rem !important;">Số bản ghi mỗi trang:</label>
				<select id="pageSizeSelect" style="font-size:1rem !important;" class="form-select">
					<option value="10">10</option>
					<option value="20">20</option>
					<option value="50">50</option>
					<option value="100">100</option>
				</select>
			</div>
			<div style="display:flex; align-items:center; ">
				<nav aria-label="Page navigation">
					<ul class="pagination justify-content-center" id="pagination">
					</ul>
				</nav>
				<div class="text-center" style="margin-left: 2px">
					<span id="pageInfo"></span>
				</div>
			</div>
		</div>

	</div>
</div>

@section Scripts {
	<script src="/dist/js/BienChung.js"></script>
	<script src="/dist/js/D0302/D0302GoiKham.js"></script>
	<script>

		$(document).ready(function() {
			// Hiển thị thông báo thành công
			var successMessage = '@Html.Raw(TempData["SuccessMessage"] as string)';
			if (successMessage) {
				toastr.success(decodeHTMLEntities(successMessage));
			}

			// Hiển thị thông báo lỗi
			var errorMessage = '@Html.Raw(TempData["ErrorMessage"] as string)';
			if (errorMessage) {
				toastr.error(decodeHTMLEntities(errorMessage));
			}

			function decodeHTMLEntities(text) {
				var textArea = document.createElement('textarea');
				textArea.innerHTML = text;
				return textArea.value;
			}
		});
	</script>
}